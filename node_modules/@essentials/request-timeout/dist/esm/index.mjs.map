{"version":3,"file":"index.mjs","sources":["../../src/index.ts"],"sourcesContent":["/**\n * Copyright 2011, Joe Lambert.\n * Free to use under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n **/\nimport {raf, caf, now} from '@essentials/raf'\n\nexport interface RequestTimeoutHandle {\n  v?: number\n}\n\nexport const clearRequestTimeout = (handle: RequestTimeoutHandle): void => {\n  caf(handle.v || -1)\n}\n\nexport const requestTimeout = (\n  fn: (...args: any[]) => void,\n  ms: number\n): RequestTimeoutHandle => {\n  const start = now(),\n    handle: RequestTimeoutHandle = {}\n\n  const loop = () => {\n    now() - start >= ms ? fn.call(null) : (handle.v = raf(loop))\n  }\n\n  handle.v = raf(loop)\n  return handle\n}\n\nexport default requestTimeout\n"],"names":["clearRequestTimeout","handle","caf","v","requestTimeout","fn","ms","start","now","loop","raf","call"],"mappings":"4DAWaA,EAAuBC,IAClCC,EAAID,EAAOE,IAAM,IAGNC,EAAiB,CAC5BC,EACAC,SAEMC,EAAQC,IACZP,EAA+B,GAE3BQ,EAAO,KACXD,IAAQD,EAASD,EAAsBL,EAAOE,EAAIO,EAAID,GAAhCJ,EAAGM,KAAK,cAGhCV,EAAOE,EAAIO,EAAID,GACRR"}