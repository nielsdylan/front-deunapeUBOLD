{"version":3,"file":"raf.js","sources":["../../src/index.ts"],"sourcesContent":["export type Raf = (callback: (timestamp: number) => void) => number\nexport type Caf = (handle: number) => void\n\nlet u = 'undefined',\n  win = typeof window !== u ? window : ({} as any),\n  p = typeof performance !== u ? performance : Date,\n  now = () => p.now(),\n  af = 'AnimationFrame' as const,\n  Caf = 'cancel' + af,\n  Raf = 'request' + af,\n  raf: Raf = win[Raf] && win[Raf].bind(win),\n  caf: Caf = win[Caf] && win[Caf].bind(win)\n\nif (!raf || !caf) {\n  let lastTime = 0\n  raf = (callback: FrameRequestCallback) => {\n    let curr = now(),\n      next = Math.max(lastTime + 1000 / 60, curr)\n    return setTimeout(() => {\n      callback((lastTime = next))\n    }, next - curr) as any\n  }\n  caf = (h) => clearTimeout(h)\n}\n\nexport {raf, caf, now}\n"],"names":["u","win","window","p","performance","Date","now","af","Caf","Raf","raf","bind","caf","lastTime","callback","curr","next","Math","max","setTimeout","h","clearTimeout"],"mappings":"qMAGIA,EAAI,YACNC,SAAaC,SAAWF,EAAIE,OAAU,GACtCC,SAAWC,cAAgBJ,EAAII,YAAcC,KAC7CC,EAAM,kBAAMH,EAAEG,OACdC,EAAK,iBACLC,EAAM,SAAWD,EACjBE,EAAM,UAAYF,EAIpB,GAHEG,MAAWT,EAAIQ,IAAQR,EAAIQ,GAAKE,KAAKV,GACrCW,MAAWX,EAAIO,IAAQP,EAAIO,GAAKG,KAAKV,IAElCS,QAAQE,MAAK,KACZC,EAAW,EACfH,MAAM,SAACI,OACDC,EAAOT,IACTU,EAAOC,KAAKC,IAAIL,EAAW,IAAO,GAAIE,UACjCI,YAAW,WAChBL,EAAUD,EAAWG,KACpBA,EAAOD,IAEZH,MAAM,SAACQ,UAAMC,aAAaD"}